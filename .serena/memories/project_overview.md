# dotto-admin-bff-api

## Purpose
Admin BFF (Backend For Frontend) API for the Dotto platform. Acts as a gateway between the admin web frontend and backend microservices.

## Tech Stack
- **Language**: Go 1.25.6
- **Web Framework**: Gin
- **API Code Generation**: oapi-codegen (from OpenAPI 3.1 spec)
- **Authentication**: Firebase Auth (ID Token verification via middleware)
- **External API Client**: Generated from OpenAPI spec with Google ID token auth
- **Task Runner**: Taskfile (task)
- **Environment Management**: mise, godotenv
- **Deployment**: Docker, Google Cloud Run

## Architecture
Layered architecture:
- `cmd/server/main.go` - Entry point
- `internal/handler/` - HTTP handlers (implement generated `ServerInterface`)
- `internal/service/` - Business logic
- `internal/repository/` - Data access (delegates to external API clients)
- `internal/external/` - External service integration
- `internal/domain/` - Domain models
- `internal/middleware/` - Gin middlewares (Firebase Auth)
- `generated/` - Auto-generated code from OpenAPI specs
- `openapi/` - OpenAPI specifications

## Patterns
- Handler implements `api.ServerInterface` (generated by oapi-codegen)
- Middleware sets Firebase auth token in Gin context + request context
- Repository pattern wraps generated API clients for external services
- Converter functions in handler layer for domain <-> API type mapping
